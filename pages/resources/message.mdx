# Message Reference

### Message Object

Represents a message sent in a channel within Discord.

###### Message Structure

<Alert type="warn">

For bots, `content`, `embeds`, `attachments`, and `components` require the [`MESSAGE_CONTENT` intent](/topics/gateway#message-content-intent) to receive non-empty values.

</Alert>

| Field                     | Type                                                                                               | Description                                                                                                                               |
| ------------------------- | -------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| id                        | snowflake                                                                                          | The ID of the message                                                                                                                     |
| channel_id                | snowflake                                                                                          | The ID of the channel the message was sent in                                                                                             |
| guild_id?                 | snowflake                                                                                          | The ID of the guild the message was sent in                                                                                               |
| author\*                  | partial [user](/resources/user#user-object) object                                                 | The author of the message                                                                                                                 |
| member?                   | partial [guild member](/resources/guild#guild-member-object) object                                | Guild member data for this message's author                                                                                               |
| content                   | string                                                                                             | Contents of the message                                                                                                                   |
| timestamp                 | ISO8601 timestamp                                                                                  | When this message was sent                                                                                                                |
| edited_timestamp          | ?ISO8601 timestamp                                                                                 | when this message was last edited                                                                                                         |
| tts                       | boolean                                                                                            | Whether this message will be read out by TTS                                                                                              |
| mention_everyone          | boolean                                                                                            | Whether this message mentions everyone                                                                                                    |
| mentions                  | array[[user](/resources/user#user-object) object]                                                  | Users specifically mentioned in the message                                                                                               |
| mention_roles             | array[snowflake]                                                                                   | Roles specifically mentioned in this message                                                                                              |
| mention_channels?\*\*     | array[[partial channel](/resources/channel#partial-channel) object]                                | Channels specifically mentioned in this message                                                                                           |
| attachments               | array[[attachment](#attachment-object) object]                                                     | The attached files                                                                                                                        |
| embeds                    | array[[embed](#embed-object) object]                                                               | Content embedded in the message                                                                                                           |
| reactions?                | array[[reaction](#reaction-object) object]                                                         | Reactions on the message                                                                                                                  |
| nonce?                    | integer \| string                                                                                  | The message's nonce, used for message deduplication                                                                                       |
| pinned                    | boolean                                                                                            | Whether this message is pinned                                                                                                            |
| webhook_id?               | snowflake                                                                                          | The ID of the webhook that send the message                                                                                               |
| type                      | integer                                                                                            | The [type of message](#message-types)                                                                                                     |
| activity?                 | [message activity](#message-activity-object) object                                                | The activity the author is inviting users to in the message                                                                               |
| application?              | interaction [application](/resources/application#application-object) object                        | The application of the message's activity                                                                                                 |
| application_id?           | snowflake                                                                                          | The ID of the application; only send for interaction responses                                                                            |
| message_reference?        | [message reference](#message-reference-structure) object                                           | The source of a crosspost, channel follow add, pin, or reply message                                                                      |
| flags?                    | integer                                                                                            | The [message's flags](#message-flags)                                                                                                     |
| referenced_message?\*\*\* | ?[message object](#message-object)                                                                 | The message associated with the `message_reference`                                                                                       |
| call?                     | [message call](#message-call-object) object                                                        | The private channel call that prompted this message                                                                                       |
| interaction?              | [message interaction](/interactions/receiving-and-responding#message-interaction-structure) object | The interaction the message is responding to                                                                                              |
| thread?                   | [channel](/resources/channel#channel-object) object                                                | The thread that was started from this message, with the [`member`](/resources/channel#channel-object) key representing thread member data |
| role_subscription_data?   | [message role subscription](#message-role-subscription-object) object                              | The role subscription purchase or renewal that prompted this message                                                                      |
| components?               | array[[message component](/interactions/message-components#component-object) object]               | The message's components (e.g. buttons, select menus)                                                                                     |
| sticker_items?            | array[[sticker item](/resources/sticker#sticker-item-object) object]                               | The message's sticker items                                                                                                               |
| stickers?                 | array[[sticker](/resources/sticker#sticker-object) object]                                         | Extra rich information for the message's sticker items; only available in some contexts                                                   |

\* The `author` object follows the structure of the user object, but may not be a valid user in the case where the message is generated by a webhook; you can recognize this by checking for the `webhook_id` key on the message object. In these cases, the below notice about the additional `member` keys does not apply as webhooks are not guild members.

\*\* Not all channel mentions in a message will appear in `mention_channels`. Only textual channels that are visible to everyone in a lurkable guild will ever be included. Only crossposted messages (via Channel Following) currently include `mention_channels` at all. If no mentions in the message meet these requirements, this field will not be sent.

\*\*\* This field is only returned for messages with a `type` of `REPLY` or `THREAD_STARTER_MESSAGE`. If the message is a reply but the `referenced_message` field is not present, the backend did not attempt to fetch the message that was being replied to, so its state is unknown. If the field exists but is `null`, the referenced message was deleted.

###### Message Types

<Alert type="warn">

Type `19` and `20` are only available in API v8 and above. In v7 and below, they are represented as type `0`. Additionally, type `21` is only available in API v9 and above.

</Alert>

| Value  | Name                                         | Description                                                               | Rendered Content                                                                                                                                                                | Deletable |
| ------ | -------------------------------------------- | ------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- |
| 0      | DEFAULT                                      | A default message (see below)                                             | "{content}"                                                                                                                                                                     | true      |
| 1      | RECIPIENT_ADD                                | A message sent when a user is added to a group DM or thread               | "{author} added {mentions[0]} to the {group/thread}."                                                                                                                           | false     |
| 2      | RECIPIENT_REMOVE                             | A message sent when a user is removed from a group DM or thread           | "{author} removed {mentions[0]} from the {group/thread}."                                                                                                                       | false     |
| 3      | CALL                                         | A message sent when a user creates a call in a private channel            | participated ? "{author} started a call{ended ? " that lasted {duration}" : " — Join the call"}." : "You missed a call from {author} that lasted {duration}."                   | false     |
| 4      | CHANNEL_NAME_CHANGE                          | A message sent when a group DM or thread's name is changed                | "{author} changed the channel name: **{content}**"                                                                                                                              | false     |
| 5      | CHANNEL_ICON_CHANGE                          | A message sent when a group DM's icon is changed                          | "{author} changed the channel icon."                                                                                                                                            | false     |
| 6      | CHANNEL_PINNED_MESSAGE                       | A message sent when a message is pinned in a channel                      | "{author} pinned a message to this channel."                                                                                                                                    | true      |
| 7      | USER_JOIN                                    | A message sent when a user joins a guild                                  | See [user join message type](#user-join-message-type), obtained via the formula `timestamp_ms % 13`                                                                             | true      |
| 8      | PREMIUM_GUILD_SUBSCRIPTION                   | A message sent when a user subscribes to (boosts) a guild                 | "{author} just boosted the server{content ? " **{content}** times"}!"                                                                                                           | true      |
| 9      | PREMIUM_GUILD_SUBSCRIPTION_TIER_1            | A message sent when a user subscribes to (boosts) a guild to tier 1       | "{author} just boosted the server{content ? " **{content}** times"}! {guild} has achieved **Level 1!**"                                                                         | true      |
| 10     | PREMIUM_GUILD_SUBSCRIPTION_TIER_2            | A message sent when a user subscribes to (boosts) a guild to tier 2       | "{author} just boosted the server{content ? " **{content}** times"}! {guild} has achieved **Level 2!**"                                                                         | true      |
| 11     | PREMIUM_GUILD_SUBSCRIPTION_TIER_3            | A message sent when a user subscribes to (boosts) a guild to tier 3       | "{author} just boosted the server{content ? " **{content}** times"}! {guild} has achieved **Level 3!**"                                                                         | true      |
| 12     | CHANNEL_FOLLOW_ADD                           | A message sent when a news channel is followed                            | "{author} has added {content} to this channel. Its most important updates will show up here."                                                                                   | true      |
| ~~13~~ | ~~GUILD_STREAM~~                             | ~~A message sent when a user starts streaming in a guild~~                |                                                                                                                                                                                 | ~~false~~ |
| 14     | GUILD_DISCOVERY_DISQUALIFIED                 | A message sent when a guild is disqualified from discovery                | "This server has been removed from Server Discovery because it no longer passes all the requirements. Check Server Settings for more details."                                  | false     |
| 15     | GUILD_DISCOVERY_REQUALIFIED                  | A message sent when a guild requalifies for discovery                     | "This server is eligible for Server Discovery again and has been automatically relisted!"                                                                                       | false     |
| 16     | GUILD_DISCOVERY_GRACE_PERIOD_INITIAL_WARNING | A message sent when a guild has failed discovery requirements for a week  | "This server has failed Discovery activity requirements for 1 week. If this server fails for 4 weeks in a row, it will be automatically removed from Discovery."                | false     |
| 17     | GUILD_DISCOVERY_GRACE_PERIOD_FINAL_WARNING   | A message sent when a guild has failed discovery requirements for 3 weeks | "This server has failed Discovery activity requirements for 3 weeks in a row. If this server fails for 1 more week, it will be removed from Discovery."                         | false     |
| 18     | THREAD_CREATED                               | A message sent when a thread is created                                   | "{author} started a thread: **{content}**. See all threads."                                                                                                                    | true      |
| 19     | REPLY                                        | A message sent when a user replies to a message                           | "{content}"                                                                                                                                                                     | true      |
| 20     | CHAT_INPUT_COMMAND                           | A message sent when a user uses a slash command                           | "{content}"                                                                                                                                                                     | true      |
| 21     | THREAD_STARTER_MESSAGE                       | A message sent when a thread starter message is added to a thread         | "{referenced_message?.content}" ?? "Sorry, we couldn't load the first message in this thread"                                                                                   | false     |
| 22     | GUILD_INVITE_REMINDER                        | A message sent to remind users to invite friends to a guild               | "Wondering who to invite?\nStart by inviting anyone who can help you build the server!"                                                                                         | true      |
| 23     | CONTEXT_MENU_COMMAND                         | A message sent when a user uses a context menu command                    | "{content}"                                                                                                                                                                     | true      |
| 24     | AUTO_MODERATION_ACTION                       | A message sent when auto moderation takes an action                       | Special embed rendered from {embeds[0]}                                                                                                                                         | true\*    |
| 25     | ROLE_SUBSCRIPTION_PURCHASE                   | A message sent when a user purchases or renews a role subscription        | "{author} {is_renewal ? "renewed" : "joined"} **{role_subscription.tier_name}** and has been a subscriber of {guild} for {role_subscription.total_months_subscribed} month(?s)" | true      |
| 26     | INTERACTION_PREMIUM_UPSELL                   | A message sent when a user is upsold to a premium interaction             | "{content}"                                                                                                                                                                     | true      |
| 27     | STAGE_START                                  | A message sent when a stage channel starts                                | "{author} started **{content}**"                                                                                                                                                | true      |
| 28     | STAGE_END                                    | A message sent when a stage channel ends                                  | "{author} ended **{content}**"                                                                                                                                                  | true      |
| 29     | STAGE_SPEAKER                                | A message sent when a user starts speaking in a stage channel             | "{author} is now a speaker."                                                                                                                                                    | true      |
| 30     | STAGE_RAISE_HAND                             | A message sent when a user raises their hand in a stage channel           | "{author} requested to speak."                                                                                                                                                  | true      |
| 31     | STAGE_TOPIC                                  | A message sent when a stage channel's topic is changed                    | "{author} changed the Stage topic: **{content}**"                                                                                                                               | true      |
| 32     | GUILD_APPLICATION_PREMIUM_SUBSCRIPTION       | A message sent when a user purchases an application premium subscription  | "{author} upgraded {application ?? "a deleted application"} to premium for this server!"                                                                                        | true      |

\* Can only be deleted by members with the `MANAGE_MESSAGES` permission.

###### User Join Message Type

The type of rendered message is determined via converting the message's `timestamp` to a unix timestamp with millisecond precision, modulo 13.

| Value | Rendered Content                                |
| ----- | ----------------------------------------------- |
| 0     | "{author} joined the party."                    |
| 1     | "{author} is here."                             |
| 2     | "Welcome, {author}. We hope you brought pizza." |
| 3     | "A wild {author} appeared."                     |
| 4     | "{author} just landed."                         |
| 5     | "{author} just slid into the server."           |
| 6     | "{author} just showed up!"                      |
| 7     | "Welcome {author}. Say hi!"                     |
| 8     | "{author} hopped into the server."              |
| 9     | "Everyone welcome {author}!"                    |
| 10    | "Glad you're here, {author}."                   |
| 11    | "Good to see you, {author}."                    |
| 12    | "Yay you made it, {author}!"                    |

###### Message Flags

| Value   | Name                                   | Description                                                                       |
| ------- | -------------------------------------- | --------------------------------------------------------------------------------- |
| 1 << 0  | CROSSPOSTED                            | This message has been published to subscribed channels (via Channel Following)    |
| 1 << 1  | IS_CROSSPOST                           | This message originated from a message in another channel (via Channel Following) |
| 1 << 2  | SUPPRESS_EMBEDS                        | Embeds will not be included when serializing this message                         |
| 1 << 3  | SOURCE_MESSAGE_DELETED                 | The source message for this crosspost has been deleted (via Channel Following)    |
| 1 << 4  | URGENT                                 | This message came from the urgent message system                                  |
| 1 << 5  | HAS_THREAD                             | This message has an associated thread, with the same ID as the message            |
| 1 << 6  | EPHEMERAL                              | This message is only visible to the user who invoked the interaction              |
| 1 << 7  | LOADING                                | This message is an interaction response and the bot is "thinking"                 |
| 1 << 8  | FAILED_TO_MENTION_SOME_ROLES_IN_THREAD | Some roles were not mentioned and added to the thread                             |
| 1 << 10 | SHOULD_SHOW_LINK_NOT_DISCORD_WARNING   | This message contains a link that impersonates Discord                            |
| 1 << 12 | SUPPRESS_NOTIFICATIONS                 | This message will not trigger push and desktop notifications                      |
| 1 << 13 | IS_VOICE_MESSAGE                       | This message's audio attachments are rendered as voice messages                   |

###### Example Message

```json
{
  "id": "1076229630052270231",
  "type": 0,
  "content": "guh",
  "channel_id": "1029316811088478299",
  "author": {
    "id": "545581357812678656",
    "username": "Alien",
    "avatar": "60387de43133809b083fb0f7458d2708",
    "avatar_decoration": null,
    "discriminator": "3530",
    "public_flags": 4194432
  },
  "attachments": [],
  "embeds": [],
  "mentions": [],
  "mention_roles": [],
  "pinned": false,
  "mention_everyone": false,
  "tts": false,
  "timestamp": "2023-02-17T19:52:19.184000+00:00",
  "edited_timestamp": null,
  "flags": 0,
  "components": [],
  "reactions": [
    {
      "emoji": {
        "id": null,
        "name": "‼️"
      },
      "count": 2,
      "burst_count": 1,
      "burst_colors": ["#f0ca59", "#4c704f", "#e07f45", "#f0ae59", "#f0bc59", "#f0a059", "#e08e45", "#f0984a"],
      "burst_me": false,
      "me": true
    }
  ]
}
```

###### Example Crossposted Message

```json
{
  "id": "1076589465084104805",
  "type": 0,
  "content": "test",
  "channel_id": "909072028911423498",
  "author": {
    "bot": true,
    "id": "999498190359371866",
    "username": "Testing Server #News",
    "avatar": "47b30f67c7e2c15637936cd180dd681c",
    "discriminator": "0000"
  },
  "attachments": [],
  "embeds": [],
  "mentions": [],
  "mention_roles": [],
  "pinned": false,
  "mention_everyone": false,
  "tts": false,
  "timestamp": "2023-02-18T19:42:10.541000+00:00",
  "edited_timestamp": null,
  "flags": 2,
  "components": [],
  "webhook_id": "999498190359371866",
  "message_reference": {
    "channel_id": "901900332408381450",
    "guild_id": "901900332408381449",
    "message_id": "1076589456297054320"
  }
}
```

### Message Activity Object

###### Message Activity Structure

| Field     | Type    | Description                                                     |
| --------- | ------- | --------------------------------------------------------------- |
| type      | integer | The [type of message activity request](#message-activity-types) |
| party_id? | string  | The activity's party ID                                         |

###### Message Activity Types

| Value | Name         | Description                                     |
| ----- | ------------ | ----------------------------------------------- |
| 1     | JOIN         | Join a game with the user                       |
| 2     | SPECTATE     | Spectate a game the user is playing             |
| 4     | WATCH        | Join a stream with the user                     |
| 3     | LISTEN       | Listen to a song the user is playing on Spotify |
| 5     | JOIN_REQUEST | Request to join a game with the user            |

### Message Call Object

###### Message Call Structure

| Field           | Type               | Description                                          |
| --------------- | ------------------ | ---------------------------------------------------- |
| participants    | array[snowflake]   | The channel recipients that participated in the call |
| ended_timestamp | ?ISO8601 timestamp | When the call ended, if it has                       |

### Message Role Subscription Object

###### Message Role Subscription Structure

| Field                        | Type      | Description                                                           |
| ---------------------------- | --------- | --------------------------------------------------------------------- |
| role_subscription_listing_id | snowflake | The ID of the sku and listing that the user is subscribed to          |
| tier_name                    | string    | The name of the tier that the user is subscribed to                   |
| total_months_subscribed      | integer   | The cumulative number of months that the user has been subscribed for |
| is_renewal                   | boolean   | Whether this notification is for a renewal rather than a new purchase |

### Message Reference Object

###### Message Reference Structure

| Field               | Type      | Description                                                                                                                           |
| ------------------- | --------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| message_id?         | snowflake | The ID of the originating message                                                                                                     |
| channel_id\*        | snowflake | The ID of the originating channel                                                                                                     |
| guild_id?           | snowflake | The ID of the originating channel's guild                                                                                             |
| fail_if_not_exists? | boolean   | Whether to error if the referenced message doesn't exist instead of sending as a normal (non-reply) message (send-only, default true) |

\* Optional when creating a reply, but will always be present when receiving an event/response that includes this object.

#### Message Types

There are multiple message types that have a `message_reference` object. Since message references are generic attribution to a previous message, there will be more types of messages which have this information in the future.

###### Crosspost Messages

- These are messages that originated from another channel (`IS_CROSSPOST` flag).
- These messages have all three fields, with data of the original message that was crossposted.

###### Channel Follow Add Messages

- These are automatic messages sent when a channel is followed into the current channel (type `12`).
- These messages have the `channel_id` and `guild_id` fields, with data of the followed announcement channel.

###### Pin Messages

- These are automatic messages sent when a message is pinned (type `6`).
- These messages have `message_id` and `channel_id`, and `guild_id` if it is in a guild, with data of the message that was pinned.

###### Reply Messages

- These are messages replying to a previous message (type `19`).
- These messages have `message_id` and `channel_id`, and `guild_id` if it is in a guild, with data of the message that was replied to. The `channel_id` and `guild_id` will be the same as the reply.
- Replies are created by including a `message_reference` when sending a message. When sending, only `message_id` is required.

###### Thread Created messages

- These are automatic messages sent when a public thread is created from an old message or without a message (type `18`).
- These messages have the `channel_id` and `guild_id` fields, with data of the created thread channel.

###### Thread Starter Messages

- These are the first message in public threads created from messages. They point back to the message in the parent channel from which the thread was started (type `21`).
- These messages have `message_id`, `channel_id`, and `guild_id`.
- These messages will never have `content`, `embeds`, or `attachments`, mainly just the `message_reference` and `referenced_message` fields.

### Followed Channel Object

###### Followed Channel Structure

| Field      | Type      | Description               |
| ---------- | --------- | ------------------------- |
| channel_id | snowflake | The source channel ID     |
| webhook_id | snowflake | Created target webhook ID |

### Reaction Object

###### Reaction Structure

| Field        | Type                                                  | Description                                              |
| ------------ | ----------------------------------------------------- | -------------------------------------------------------- |
| count        | integer                                               | Total amount of times this emoji has been used to react  |
| burst_count  | integer                                               | Amount of times this emoji has been used to burst-react  |
| me           | boolean                                               | Whether the current user reacted using this emoji        |
| burst_me     | boolean                                               | Whether the current user burst-reacted using this emoji  |
| burst_colors | array[string]                                         | The hex-encoded colors to render the burst reaction with |
| emoji        | partial [emoji](/resources/emoji#emoji-object) object | Reaction emoji information                               |

###### Reaction Type

| Value | Name   | Description       |
| ----- | ------ | ----------------- |
| 0     | NORMAL | A normal reaction |
| 1     | BURST  | A burst reaction  |

### Embed Object

<Alert type="info">

The combined sum of characters in all `title`, `description`, `field.name`, `field.value`, `footer.text`, and `author.name` fields across all embeds attached to a message must not exceed 6000 characters. Leading and trailing whitespace characters are trimmed automatically.

</Alert>

<Alert type="info">

Embeds are deduplicated by URL. If a message contains multiple embeds with the same URL, only the first is shown. If the duplicates have additional images, all images are shown in a grid in the first embed.

</Alert>

###### Embed Structure

| Field        | Type                                                 | Description                                                                           |
| ------------ | ---------------------------------------------------- | ------------------------------------------------------------------------------------- |
| title?       | string                                               | The title of the embed (max 256)                                                      |
| type?        | string                                               | The [type of embed](#embed-types) (always `rich` for sent embeds)                     |
| description? | string                                               | The description of the embed (max 4096)                                               |
| url?         | string                                               | The URL of the embed                                                                  |
| timestamp?   | ISO8601 timestamp                                    | Timestamp of embed content                                                            |
| color?       | integer                                              | The color of the embed encoded as an integer representation of hexadecimal color code |
| footer?      | [embed footer](#embed-footer-structure) object       | Embed footer information                                                              |
| image?       | [embed image](#embed-image-structure) object         | Embed image information                                                               |
| thumbnail?   | [embed thumbnail](#embed-thumbnail-structure) object | Embed thumbnail information                                                           |
| video?       | [embed video](#embed-video-structure) object         | Embed video information                                                               |
| provider?    | [embed provider](#embed-provider-structure) object   | Embed provider information                                                            |
| author?      | [embed author](#embed-author-structure) object       | Embed author information                                                              |
| fields?      | array[[embed field](#embed-field-structure) object]  | The fields of the embed (max 25)                                                      |

###### Embed Types

Embed types are "loosely defined" and, for the most part, are not used by our clients for rendering. Embed attributes power what is rendered. Embed types should be considered deprecated and might be removed in a future API version.

| Type                    | Description                                  |
| ----------------------- | -------------------------------------------- |
| rich                    | Generic embed rendered from embed attributes |
| image                   | Image embed                                  |
| video                   | Video embed                                  |
| gifv                    | Animated GIF image rendered as a video embed |
| article                 | Article embed                                |
| link                    | Link embed                                   |
| auto_moderation_message | Auto moderation block message                |

###### Embed Thumbnail Structure

| Field      | Type    | Description                                                     |
| ---------- | ------- | --------------------------------------------------------------- |
| url        | string  | Source URL of thumbnail (only supports http(s) and attachments) |
| proxy_url? | string  | A proxied url of the thumbnail                                  |
| height?    | integer | Height of thumbnail                                             |
| width?     | integer | Width of thumbnail                                              |

###### Embed Video Structure

| Field      | Type    | Description                |
| ---------- | ------- | -------------------------- |
| url        | string  | Source URL of video        |
| proxy_url? | string  | A proxied url of the video |
| height?    | integer | Height of video            |
| width?     | integer | Width of video             |

###### Embed Image Structure

| Field      | Type    | Description                                                 |
| ---------- | ------- | ----------------------------------------------------------- |
| url        | string  | Source URL of image (only supports http(s) and attachments) |
| proxy_url? | string  | A proxied url of the image                                  |
| height?    | integer | Height of image                                             |
| width?     | integer | Width of image                                              |

###### Embed Provider Structure

| Field | Type   | Description              |
| ----- | ------ | ------------------------ |
| name? | string | The name of the provider |
| url?  | string | URL of the provider      |

###### Embed Author Structure

| Field           | Type   | Description                                                             |
| --------------- | ------ | ----------------------------------------------------------------------- |
| name            | string | The name of the author (max 256)                                        |
| url?            | string | URL of the author (only supports http(s))                               |
| icon_url?       | string | Source URL of the author's icon (only supports http(s) and attachments) |
| proxy_icon_url? | string | A proxied URL of the author's icon                                      |

###### Embed Footer Structure

| Field           | Type   | Description                                                           |
| --------------- | ------ | --------------------------------------------------------------------- |
| text            | string | The footer text (max 2048)                                            |
| icon_url?       | string | Source URL of the footer icon (only supports http(s) and attachments) |
| proxy_icon_url? | string | A proxied URL of the footer icon                                      |

###### Embed Field Structure

| Field   | Type    | Description                              |
| ------- | ------- | ---------------------------------------- |
| name    | string  | The name of the field (max 256)          |
| value   | string  | The value of the field (max 1024)        |
| inline? | boolean | whether this field should display inline |

### Attachment Object

###### Attachment Structure

<Alert type="info">

For the `attachments` array in Message Create/Edit requests, only the `id` is required.

</Alert>

| Field                  | Type      | Description                                                             |
| ---------------------- | --------- | ----------------------------------------------------------------------- |
| id                     | snowflake | The attachment ID                                                       |
| filename               | string    | The name of file attached                                               |
| uploaded_filename?\*\* | string    | The name of the file pre-uploaded to Discord's GCP bucket               |
| description?           | string    | The description for the file (max 1024 characters)                      |
| content_type?          | string    | The attachment's [media type](https://en.wikipedia.org/wiki/Media_type) |
| size                   | integer   | The size of file in bytes                                               |
| url                    | string    | Source URL of the file                                                  |
| proxy_url              | string    | A proxied url of the file                                               |
| height?                | ?integer  | Height of file (if image)                                               |
| width?                 | ?integer  | Width of file (if image)                                                |
| ephemeral?\*           | boolean   | whether this attachment is ephemeral                                    |

\* Ephemeral attachments will automatically be removed after a set period of time. Ephemeral attachments on messages are guaranteed to be available as long as the message itself exists.

\*\* This field is send-only. See [Uploading to GCP](/reference#uploading-to-gcp) for more information.

### Allowed Mentions Object

The allowed mention field allows for more granular control over mentions without various hacks to the message content. This will always validate against message content to avoid phantom pings (e.g. to ping everyone, you must still have `@everyone` in the message content), and check against user permissions.

###### Allowed Mention Types

| Value    | Description                           |
| -------- | ------------------------------------- |
| roles    | Controls role mentions                |
| users    | Controls user mentions                |
| everyone | Controls @everyone and @here mentions |

###### Allowed Mentions Structure

| Field         | Type             | Description                                                                                |
| ------------- | ---------------- | ------------------------------------------------------------------------------------------ |
| parse?        | array[string]    | The [allowed mention types](#allowed-mention-types) to parse from the content              |
| roles?        | array[snowflake] | The role IDs to mention (max 100)                                                          |
| users?        | array[snowflake] | The user IDs to mention (max 100)                                                          |
| replied_user? | boolean          | For replies, whether to mention the author of the message being replied to (default false) |

###### Allowed Mentions Reference

Due to the complexity of possibilities, we have included a set of examples and behavior for the allowed mentions field.

If `allowed_mentions` is _not_ passed in (i.e. the key does not exist), the mentions will be parsed via the content. This corresponds with existing behavior.

In the example below we would ping @here (and also @role124 and @user123)

```json
{
  "content": "@here Hi there from <@123>, cc <@&124>"
}
```

To suppress all mentions in a message use:

```json
{
  "content": "@everyone hi there, <@&123>",
  "allowed_mentions": {
    "parse": []
  }
}
```

This will suppress _all_ mentions in the message (no @everyone or user mention).

The `parse` field is mutually exclusive with the other fields. In the example below, we would ping users `123` and role `124`, but _not_ @everyone. Note that passing a falsy value ([], `null`) into the `users` field does not trigger a validation error.

```json
{
  "content": "@everyone <@123> <@&124>",
  "allowed_mentions": {
    "parse": ["users", "roles"],
    "users": []
  }
}
```

In the next example, we would ping @everyone, (and also users `123` and `124` if they suppressed
@everyone mentions), but we would not ping any roles.

```json
{
  "content": "@everyone <@123> <@124> <@125> <@&200>",
  "allowed_mentions": {
    "parse": ["everyone"],
    "users": ["123", "124"]
  }
}
```

Due to possible ambiguities, not all configurations are valid. An _invalid_ configuration is as follows

```json
{
  "content": "@everyone <@123> <@124> <@125> <@&200>",
  "allowed_mentions": {
    "parse": ["users"],
    "users": ["123", "124"]
  }
}
```

Because `parse: ["users"]` and `users: ["123", "124"]` are both present, we would throw a validation error.
This is because the conditions cannot be fulfilled simultaneously (they are mutually exclusive).

Any entities with an ID included in the list of IDs can be mentioned. Note that the IDs of entities not present in the message's content will simply be ignored.
e.g. The following example is valid, and would mention user 123, but _not_ user 125 since there is no mention of
user 125 in the content.

```json
{
  "content": "<@123> Time for some memes.",
  "allowed_mentions": {
    "users": ["123", "125"]
  }
}
```

## Endpoints

<RouteHeader method="GET" url="/channels/{channel.id}/messages">
  Get Messages
</RouteHeader>

Returns an array of [message](#message-object) objects in the channel. If operating on a guild channel, this endpoint requires the `VIEW_CHANNEL` permission to be present on the current user. If the current user is missing the `READ_MESSAGE_HISTORY` permission in the channel then this will return no messages (since they cannot read the message history).

###### Query String Params

| Field   | Type      | Description                                          |
| ------- | --------- | ---------------------------------------------------- |
| around? | snowflake | Get messages around this message ID                  |
| before? | snowflake | Get messages before this message ID                  |
| after?  | snowflake | Get messages after this message ID                   |
| limit   | integer   | Max number of messages to return (1-100, default 50) |

<RouteHeader method="GET" url="/guilds/{guild.id}/messages/search OR /channels/{channel.id}/messages/search">
  Search Messages
</RouteHeader>

Returns messages without the `reactions` key that match a search query in the guild or channel. The messages that are direct results will have an extra `hit` key set to `true`. If operating on a guild channel, this endpoint requires the `READ_MESSAGE_HISTORY` permission to be present on the current user.

<Alert type="warn">

If the guild/channel you are searching is not yet indexed, the endpoint will return a 202 accepted response. The response body will not contain any search results, and will look similar to an error response:

```json
{
  "message": "Index not yet available. Try again later",
  "code": 110000,
  "document_indexed": 0,
  "retry_after": 2
}
```

You should retry the request after the timeframe specified in the `retry_after` field.

</Alert>

###### Query String Params

| Field                 | Type             | Description                                                              |
| --------------------- | ---------------- | ------------------------------------------------------------------------ |
| limit?                | integer          | Max number of messages to return (1-25, default 25)                      |
| offset?               | integer          | Number to offset the returned messages by (max 5000, default 0)          |
| max_id?               | snowflake        | Get messages before this message ID                                      |
| min_id?               | snowflake        | Get messages after this message ID                                       |
| include_nsfw?         | boolean          | Whether to include results from NSFW channels (default false)            |
| content?              | string           | Filter messages by content                                               |
| channel_id?\*         | array[snowflake] | Filter messages by these channels                                        |
| author_type?          | array[string]    | Filter messages by [author type](#author-type)                           |
| author_id?            | array[snowflake] | Filter messages by these authors                                         |
| mentions?             | array[snowflake] | Filter messages that mention these users                                 |
| mention_everyone?     | boolean          | Filter messages that do or do not mention @everyone                      |
| pinned?               | boolean          | Filter messages by whether they are or are not pinned                    |
| has?                  | array[string]    | Filter messages by whether or not they [have specific things](#has-type) |
| embed_type?           | array[string]    | Filter messages by [embed type](#embed-type)                             |
| embed_provider?       | array[string]    | Filter messages by embed provider (e.g. `tenor`)                         |
| link_hostname         | array[string]    | Filter messages by link hostname (e.g. `google.com`)                     |
| attachment_filename?  | array[string]    | Filter messages by attachment filename                                   |
| attachment_extension? | array[string]    | Filter messages by attachment extension (e.g. `txt`)                     |
| sort_by?              | string           | The [sorting algorithm](#message-sort-type) to use                       |
| sort_order?           | string           | The direction to sort (`asc` or `desc`, default `desc`)                  |

\* Not applicable when using the `GET /channels/{channel.id}/messages/search` endpoint.

###### Author Type

All types can be negated by prefixing them with `-`, which means results will not include messages that match the type.

| Value   | Description                           |
| ------- | ------------------------------------- |
| user    | Return messages sent by user accounts |
| bot     | Return messages sent by bot accounts  |
| webhook | Return messages sent by webhooks      |

###### Has Type

All types can be negated by prefixing them with `-`, which means results will not include messages that match the type.

| Value   | Description                                  |
| ------- | -------------------------------------------- |
| image   | Return messages that have an image           |
| sound   | Return messages that have a sound attachment |
| video   | Return messages that have a video            |
| file    | Return messages that have an attachment      |
| sticker | Return messages that have a sent sticker     |
| embed   | Return messages that have an embed           |
| link    | Return messages that have a link             |

###### Message Sort Type

| Value     | Description                                              |
| --------- | -------------------------------------------------------- |
| timestamp | Sort by the message creation time (default)              |
| relevance | Sort by the relevance of the message to the search query |

###### Response Body

| Field                        | Type                                                                   | Description                                                                           |
| ---------------------------- | ---------------------------------------------------------------------- | ------------------------------------------------------------------------------------- |
| messages                     | array[array[[message](#message-object) object]]                        | A nested array of messages (with optional surrounding context)\* that match the query |
| threads?                     | array[[channel](/resources/channel#channel-object) object]             | The threads that are the channels of the returned messages                            |
| members?                     | array[[thread member](/resources/channel#thread-member-object) object] | A thread member object for each returned thread the current user has joined           |
| total_results                | integer                                                                | The total number of results that match the query                                      |
| analytics_id                 | string                                                                 | The analytics ID for the search query                                                 |
| document_indexed?            | integer                                                                | Whether the guild/channels has been indexed yet (default 1, see above warning box)    |
| doing_deep_historical_index? | boolean                                                                | The status of the guild/channel's deep historical indexing operation (if any)         |

\* Surrounding context messages are no longer returned.

###### Example Response

```json
{
  "total_results": 1,
  "messages": [
    [
      {
        "id": "1076986676557131916",
        "type": 0,
        "content": "domainreaction fear",
        "channel_id": "885895521909227581",
        "author": {
          "id": "852892297661906993",
          "username": "Alien",
          "avatar": "9d52298a3ad006da31ac66a86230d9f2",
          "avatar_decoration": null,
          "discriminator": "0040",
          "public_flags": 4194368
        },
        "attachments": [],
        "embeds": [],
        "mentions": [],
        "mention_roles": [],
        "pinned": false,
        "mention_everyone": false,
        "tts": false,
        "timestamp": "2023-02-19T22:00:33.136000+00:00",
        "edited_timestamp": null,
        "flags": 0,
        "components": [],
        "hit": true
      }
    ]
  ],
  "analytics_id": "largealienalphanumericstring"
}
```

<RouteHeader method="GET" url="/channels/{channel.id}/messages/{message.id}">
  Get Message
</RouteHeader>

Returns a specific [message](#message-object) object in the channel. If operating on a guild channel, this endpoint requires the `READ_MESSAGE_HISTORY` permission to be present on the current user.

<Alert type="warn">

This endpoint is not usable by user accounts.

</Alert>

<RouteHeader method="POST" url="/channels/{channel.id}/messages">
  Create Message
</RouteHeader>

<Alert type="warn">

Discord may strip certain characters from message content, like invalid unicode characters or characters which cause unexpected message formatting. If you are passing user-generated strings into message content, consider sanitizing the data to prevent unexpected behavior and using `allowed_mentions` to prevent unexpected mentions.

</Alert>

Posts a message to a text-based channel. Returns a [message](#message-object) object on success. Fires a [Message Create](/topics/gateway#message-create) Gateway event. See [message formatting](/reference#message-formatting) for more information on how to properly format messages.

To create a message as a reply to another message, you can include a [`message_reference`](#message-reference-object) with a `message_id`. The `channel_id` and `guild_id` in the `message_reference` are optional, but will be validated if provided.

Files must be attached using a `multipart/form-data` body (or pre-uploaded to Discord's GCP bucket) as described in [Uploading Files](/reference#uploading-files).

###### Limitations

- When operating on a guild channel, the current user must have the `SEND_MESSAGES` permission.
- When sending a message with `tts` (text-to-speech) set to `true`, the current user must have the `SEND_TTS_MESSAGES` permission.
- When creating a message as a reply to another message, the current user must have the `READ_MESSAGE_HISTORY` permission.
  - The referenced message must exist and cannot be a system message.
- The maximum request size when sending a message is `8 MiB`.
- For the embed object, you can set every field except `type` (it will be `rich` regardless of if you try to set it), `provider`, `video`, and any `height`, `width`, or `proxy_url` values for images.

<Alert type="info">

Note that when sending a message, you must provide a value for **at least one of** `content`, `embeds`, `components`, `sticker_ids`, or `files[n]`.

</Alert>

###### JSON/Form Params

| Field                       | Type                                                                                 | Description                                                                                                                                                          |
| --------------------------- | ------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| content?                    | string                                                                               | The message contents (up to 2000 characters)                                                                                                                         |
| tts?                        | boolean                                                                              | Whether this is a TTS message                                                                                                                                        |
| embeds?\*\*                 | array[[embed](#embed-object) object]                                                 | Embedded `rich` content (max 10, 6000 characters)                                                                                                                    |
| embed?\*\* **(deprecated)** | [embed](#embed-object) object                                                        | Embedded `rich` content (max 6000 characters), deprecated in favor of `embeds`                                                                                       |
| nonce?\*\*\*                | integer \| string                                                                    | The message's nonce, used for message deduplication (will be present in the returned object and accompanying [Message Create](/topics/gateway#message-create) event) |
| allowed_mentions?           | [allowed mention](#allowed-mentions-object) object                                   | Allowed mentions for the message                                                                                                                                     |
| message_reference?          | [message reference](#message-reference-structure) object                             | The message being replied to                                                                                                                                         |
| components?\*\*             | array[[message component](/interactions/message-components#component-object) object] | The components to include with the message                                                                                                                           |
| sticker_ids?                | array[snowflake]                                                                     | IDs of up to 3 [stickers](/resources/sticker#sticker-object) to send in the message                                                                                  |
| flags?                      | integer                                                                              | The [message's flags](/resources/message#message-flags) (only `SUPPRESS_EMBEDS`, `SUPPRESS_NOTIFICATIONS`, and `IS_VOICE_MESSAGE` can be set)                        |
| files[n]?\*                 | file contents                                                                        | Contents of the file being sent (max 10)                                                                                                                             |
| payload_json?\*             | string                                                                               | JSON-encoded body of non-file params                                                                                                                                 |
| attachments?\*              | array[partial [attachment](#attachment-object) object]                               | Partial attachment objects with `filename` and `description` (max 10)                                                                                                |

\* See [Uploading Files](/reference#uploading-files) for details.

\*\* Cannot be used by user accounts.

\*\*\* Sending multiple messages in the same channel with the same nonce in a short period of time will result in only the first message being sent.

###### Example Request Body (application/json)

```json
{
  "content": "Hello, World!",
  "tts": false,
  "embeds": [
    {
      "title": "Hello, Embed!",
      "description": "This is an embedded message."
    }
  ]
}
```

Examples for file uploads are available in [Uploading Files](/reference#uploading-files).

<RouteHeader method="POST" url="/channels/{channel.id}/messages/greet">
  Create Greet Message
</RouteHeader>

Posts a greet message to a channel. This endpoint requires the channel is a DM channel or you reply to a system message. Returns a [message](#message-object) object on success. Fires a [Message Create](/topics/gateway#message-create) Gateway event.

###### JSON Params

| Field              | Type                                                     | Description                                                                        |
| ------------------ | -------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| sticker_ids        | array[snowflake]                                         | IDs of up to 1 [sticker](/resources/sticker#sticker-object) to send in the message |
| allowed_mentions?  | [allowed mention](#allowed-mentions-object) object       | Allowed mentions for the message                                                   |
| message_reference? | [message reference](#message-reference-structure) object | The message being replied to                                                       |

<RouteHeader method="POST" url="/channels/{channel.id}/attachments">
  Create Attachments
</RouteHeader>

Creates attachment URLs to upload the intended attachments directly to Discord's GCP storage bucket. Returns an array of [cloud attachment](#cloud-attachment-structure) objects. Requires the same permissions as uploading an attachment inline with a message. See [Uploading to GCP](/reference#uploading-to-gcp) for more information.

###### JSON Params

| Field | Type                                                            | Description                                                        |
| ----- | --------------------------------------------------------------- | ------------------------------------------------------------------ |
| files | array[[upload attachment](#upload-attachment-structure) object] | The target files to create a URL for, containing the name and size |

###### Upload Attachment Structure

| Field     | Type    | Description                                           |
| --------- | ------- | ----------------------------------------------------- |
| id?       | ?string | The ID of the attachment to reference in the response |
| filename  | string  | The name of the file being uploaded                   |
| file_size | integer | The size of the file being uploaded in bytes          |

###### Cloud Attachment Structure

| Field           | Type    | Description                                                 |
| --------------- | ------- | ----------------------------------------------------------- |
| id              | ?string | The ID of the attachment upload, if provided in the request |
| upload_url      | string  | The URL to upload the file to                               |
| upload_filename | string  | The name of the uploaded file                               |

###### Example Response

```json
{
  "attachments": [
    {
      "id": "23",
      "upload_url": "https://discord-attachments-uploads-prd.storage.googleapis.com/87e49c99-43f8-4a33-baad-5a834c94424c/cat.png?upload_id=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
      "upload_filename": "87e49c99-43f8-4a33-baad-5a834c94424c/cat.png"
    }
  ]
}
```

<RouteHeader method="DELETE" url="/channels/{channel.id}/attachments/{cloud_attachment.upload_filename}">
  Delete Attachment
</RouteHeader>

Deletes an attachment from Discord's GCP storage bucket. Returns a 204 empty response on success.

This endpoint should be used to delete an uploaded attachment that was not used. See [Uploading to GCP](/reference#uploading-to-gcp) for more information.

<RouteHeader method="POST" url="/channels/{channel.id}/messages/{message.id}/ack">
  Acknowledge Message
</RouteHeader>

Sets the channel's latest acknowledged message (marks a message as read) for the current user. Fires a [Message Ack](/topics/gateway#message-ack) Gateway event.

The message ID parameter does not need to be a valid message ID, but it must be a valid snowflake. If the message ID is being set to a message sent prior to the latest acknowledged one, `manual` should be `true` or the resulting read state update should be ignored by clients (but is still saved), resulting in undefined behavior. In this case, `mention_count` should also be set to the amount of mentions unacknowledged as it is not automatically calculated by Discord.

###### JSON Params

| Field            | Type    | Description                                        |
| ---------------- | ------- | -------------------------------------------------- |
| token?           | ?string | The last received ack token, or `null`             |
| manual?          | boolean | Whether the acknowleged message ID is manually set |
| mention_count?\* | integer | The new unread indicator for the channel           |

\* This field requires `manual` to be `true`.

###### Response Body

| Field | Type    | Description       |
| ----- | ------- | ----------------- |
| token | ?string | The new ack token |

<RouteHeader method="POST" url="/channels/{channel.id}/messages/{message.id}/crosspost">
  Crosspost Message
</RouteHeader>

Crossposts a message in a News Channel to following channels. This endpoint requires the `SEND_MESSAGES` permission, if the current user sent the message, or additionally the `MANAGE_MESSAGES` permission, for all other messages, to be present for the current user. Returns a [message](#message-object) object on success. Fires a [Message Update](/topics/gateway#message-update) (and possibly multiple [Message Create](/topics/gateway#message-create)) Gateway event.

<RouteHeader method="POST" url="/channels/{channel.id}/messages/{message.id}/hide-guild-feed">
  Hide Message from Guild Feed
</RouteHeader>

Hides a message from the feed of the guild the channel belongs to. Returns a 204 empty response on success.

<RouteHeader method="GET" url="/channels/{channel.id}/messages/{message.id}/reactions/{emoji}">
  Get Reactions
</RouteHeader>

Get a list of users that reacted with this emoji. Returns an array of partial [user](/resources/user#user-object) objects.
The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail. To use custom emoji, you must encode it in the format `name:id` with the emoji name and emoji ID.

###### Query String Params

| Field | Type      | Description                                                                  |
| ----- | --------- | ---------------------------------------------------------------------------- |
| after | snowflake | Get users after this user ID                                                 |
| limit | integer   | Max number of users to return (1-100, default 25)                            |
| type? | integer   | The [type of reaction](#reaction-types) to get users for (default `REGULAR`) |

<RouteHeader method="PUT" url="/channels/{channel.id}/messages/{message.id}/reactions/{emoji}/@me">
  Create Reaction
</RouteHeader>

Creates a reaction for the message. This endpoint requires the `READ_MESSAGE_HISTORY` permission to be present on the current user. Additionally, if nobody else has reacted to the message using this emoji, this endpoint requires the `ADD_REACTIONS` permission to be present on the current user. Returns a 204 empty response on success. Fires a [Message Reaction Add](/topics/gateway#message-reaction-add) (and optionally a [Burst Credit Balance Update](/topics/gateway#burst-credit-balance-update)) Gateway event.
The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail. To use custom emoji, you must encode it in the format `name:id` with the emoji name and emoji ID.

###### Query String Params

| Field | Type    | Description                                                           |
| ----- | ------- | --------------------------------------------------------------------- |
| type? | integer | The [type of reaction](#reaction-types) to create (default `REGULAR`) |

<RouteHeader method="DELETE" url="/channels/{channel.id}/messages/{message.id}/reactions/{emoji}/@me">
  Delete Own Reaction
</RouteHeader>

Deletes a reaction the current user has made for the message. Returns a 204 empty response on success. Fires a [Message Reaction Remove](/topics/gateway#message-reaction-remove) Gateway event.
The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail. To use custom emoji, you must encode it in the format `name:id` with the emoji name and emoji ID.

<RouteHeader method="DELETE" url="/channels/{channel.id}/messages/{message.id}/reactions/{emoji}/{user.id}">
  Delete Reaction
</RouteHeader>

Deletes another user's reaction. This endpoint requires the `MANAGE_MESSAGES` permission to be present on the current user. Returns a 204 empty response on success. Fires a [Message Reaction Remove](/topics/gateway#message-reaction-remove) Gateway event.
The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail. To use custom emoji, you must encode it in the format `name:id` with the emoji name and emoji ID.

<RouteHeader method="DELETE" url="/channels/{channel.id}/messages/{message.id}/reactions/{emoji}">
  Delete Reaction Emoji
</RouteHeader>

Deletes all the reactions for a given emoji on a message. Returns a 204 empty response on success. This endpoint requires the `MANAGE_MESSAGES` permission to be present on the current user. Fires a [Message Reaction Remove Emoji](/topics/gateway#message-reaction-remove-emoji) Gateway event.
The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail. To use custom emoji, you must encode it in the format `name:id` with the emoji name and emoji ID.

<RouteHeader method="DELETE" url="/channels/{channel.id}/messages/{message.id}/reactions">
  Delete All Reactions
</RouteHeader>

Deletes all reactions on a message. Returns a 204 empty response on success. This endpoint requires the `MANAGE_MESSAGES` permission to be present on the current user. Fires a [Message Reaction Remove All](/topics/gateway#message-reaction-remove-all) Gateway event.

<RouteHeader method="PATCH" url="/channels/{channel.id}/messages/{message.id}">
  Edit Message
</RouteHeader>

Edits a previously sent message. All fields can be edited by the original message author. Other users can only edit `flags` and only if they have the `MANAGE_MESSAGES` permission in the corresponding channel. When specifying flags, ensure to include all previously set flags/bits in addition to ones that you are modifying.

When the `content` field is edited, the `mentions` array in the message object will be reconstructed from scratch based on the new content. The `allowed_mentions` field of the edit request controls how this happens. If there is no explicit `allowed_mentions` in the edit request, the content will be parsed with _default_ allowances, that is, without regard to whether or not an `allowed_mentions` was present in the request that originally created the message.

Returns a [message](#message-object) object. Fires a [Message Update](#message-object) Gateway event.

Refer to [Uploading Files](/reference#uploading-files) for details on attachments and `multipart/form-data` requests.
Any provided files will be **appended** to the message. To remove or replace files you will have to supply the `attachments` field which specifies the files to retain on the message after edit.

<Alert type="warn">

Starting with API v10, the `attachments` array must contain all attachments that should be present after edit, including **retained and new** attachments provided in the request body.

</Alert>

<Alert type="info">

All parameters to this endpoint are optional and nullable.

</Alert>

###### JSON/Form Params

| Field                       | Type                                                                                  | Description                                                                                    |
| --------------------------- | ------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| content?                    | ?string                                                                               | The message contents (up to 2000 characters)                                                   |
| embeds?\*\*                 | ?array[[embed](#embed-object) object]                                                 | Embedded `rich` content (max 6000 characters)                                                  |
| embed?\*\* **(deprecated)** | ?[embed](#embed-object) object                                                        | Embedded `rich` content (max 6000 characters), deprecated in favor of `embeds`                 |
| allowed_mentions?           | ?[allowed mention](#allowed-mentions-object) object                                   | Allowed mentions for the message                                                               |
| components?\*\*             | ?array[[message component](/interactions/message-components#component-object) object] | The components to include with the message                                                     |
| flags?                      | ?integer                                                                              | The [message's flags](/resources/message#message-flags) (only `SUPPRESS_EMBEDS` can be set)    |
| files[n]\*                  | ?file contents                                                                        | Contents of the file being sent                                                                |
| payload_json\*              | ?string                                                                               | JSON-encoded body of non-file params                                                           |
| attachments\*               | ?array[partial [attachment](#attachment-object) object]                               | Partial attachment objects with `filename` and `description`, including attached files to keep |

\* See [Uploading Files](/reference#uploading-files) for details.

<RouteHeader method="DELETE" url="/channels/{channel.id}/messages/{message.id}" supportsAuditReason>
  Delete Message
</RouteHeader>

Deletes a message. If operating on a guild channel and trying to delete a message that was not sent by the current user, this endpoint requires the `MANAGE_MESSAGES` permission. Returns a 204 empty response on success. Fires a [Message Delete](/topics/gateway#message-delete) Gateway event.

<RouteHeader method="POST" url="/channels/{channel.id}/messages/bulk-delete" supportsAuditReason>
  Bulk Delete Messages
</RouteHeader>

Deletes multiple messages in a single request. This endpoint can only be used on guild channels and requires the `MANAGE_MESSAGES` permission. Returns a 204 empty response on success. Fires a [Message Delete Bulk](/topics/gateway#message-delete-bulk) Gateway event.

Any message IDs given that do not exist or are invalid will count towards the minimum and maximum message count (currently 2 and 100 respectively).

<Alert type="warn">

This endpoint will not delete messages older than 2 weeks, and will fail if any message provided is older than that or if any duplicate message IDs are provided.

</Alert>

<Alert type="warn">

This endpoint is not usable by user accounts.

</Alert>

###### JSON Params

| Field    | Type             | Description                       |
| -------- | ---------------- | --------------------------------- |
| messages | array[snowflake] | The message IDs to delete (2-100) |

<RouteHeader method="GET" url="/channels/{channel.id}/pins">
  Get Pinned Messages
</RouteHeader>

Returns all pinned messages in the channel as an array of [message](#message-object) objects without the `reactions` key.

<RouteHeader method="PUT" url="/channels/{channel.id}/pins/{message.id}" supportsAuditReason>
  Pin Message
</RouteHeader>

Pins a message in a channel. Requires the `MANAGE_MESSAGES` permission. Returns a 204 empty response on success.

<Alert type="warn">

The max pinned messages is 50.

</Alert>

<RouteHeader method="DELETE" url="/channels/{channel.id}/pins/{message.id}" supportsAuditReason>
  Unpin Message
</RouteHeader>

Unpins a message in a channel. Requires the `MANAGE_MESSAGES` permission. Returns a 204 empty response on success.

<RouteHeader method="POST" url="/channels/{channel.id}/pins/ack">
  Acknowledge Pinned Messages
</RouteHeader>

Acknowledges the currently pinned messages in a channel. Returns a 204 empty response on success. Fires a [Channel Pins Ack](/topics/gateway#channel-pins-ack) Gateway event.
