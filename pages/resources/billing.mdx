# Billing

todo i am lazy to make description for resouce

### Payment Source Object

###### Payment Source Structure

| Field                      | Type                                       | Description                                                                       |
| -------------------------- | ------------------------------------------ | --------------------------------------------------------------------------------- |
| id                         | snowflake                                  | The ID of the payment source                                                      |
| brand?                     | string                                     | The brand of the payment source (only applicable for credit cards)                |
| country?                   | string                                     | The country of the payment source                                                 |
| last_4?                    | string                                     | The last four digits of the payment source (only applicable for credit cards)     |
| billing_address ^1^        | [billing address](#billing-address-object) | The billing address of the payment source                                         |
| type                       | integer                                    | The [type of the payment source](#payment-source-type)                            |
| payment_gateway            | integer                                    | The [payment gateway](#payment-gateway) of the payment source                     |
| payment_gateway_source_id? | string                                     | The ID of the payment source in the payment gateway                               |
| default ^1^                | boolean                                    | Whether the payment source is the default payment source                          |
| invalid                    | boolean                                    | Whether the payment source is invalid                                             |
| flags                      | integer                                    | The [payment source's flags](#payment-source-flags)                               |
| deleted_at                 | ?ISO8601 timestamp                         | When the payment source was deleted at                                            |
| expires_month?             | integer                                    | The year the credit card expires in                                               |
| expires_year?              | integer                                    | The month the credit card expires in                                              |
| email?                     | string                                     | The email address associated with the payment source (only applicable for PayPal) |
| bank?                      | string                                     | The bank associated with the payment source                                       |
| username?                  | string                                     | The username associated with the payment source (only applicable for Venmo)       |

^1^ Not available in payment objects.

###### Payment Source Type

| Value | Name            | Description        |
| ----- | --------------- | ------------------ |
| 0     | UNKNOWN         | Unknown            |
| 1     | CARD            | Credit card        |
| 2     | PAYPAL          | PayPal             |
| 3     | GIROPAY         | Giropay            |
| 4     | SOFORT          | Sofort             |
| 5     | PRZELEWY24      | Przelewy24         |
| 6     | SEPA_DEBIT      | SEPA debit         |
| 7     | PAYSAFE_CARD    | Paysafe            |
| 8     | GCASH           | GCash              |
| 9     | GRABPAY_MY      | GrabPay (Malaysia) |
| 10    | MOMO_WALLET     | MoMo Wallet        |
| 11    | VENMO           | Venmo              |
| 12    | GOPAY_WALLET    | GoPay Wallet       |
| 13    | KAKAOPAY        | KakaoPay           |
| 14    | BANCONTACT      | Bancontact         |
| 15    | EPS             | EPS                |
| 16    | IDEAL           | iDEAL              |
| 17    | CASH_APP        | Cash App           |
| 18    | APPLE           | Apple Pay          |
| 99    | PAYMENT_REQUEST | Unknown            |

###### Payment Gateway

| Value | Name          | Description |
| ----- | ------------- | ----------- |
| 1     | STRIPE        | Stripe      |
| 2     | BRAINTREE     | Braintree   |
| 3     | APPLE         | Apple       |
| 4     | GOOGLE        | Google      |
| 5     | ADYEN         | Adyen       |
| 6     | APPLE_PARTNER | Apple Pay   |

###### Payment Source Flags

| Value  | Name | Description           |
| ------ | ---- | --------------------- |
| 1 << 0 | NEW  | Payment source is new |

### Endpoints

<RouteHeader method="GET" url="/users/@me/billing/payment-sources">
  Get Payment Sources
</RouteHeader>

Returns a list of [payment source](#payment-source-object) objects.

<RouteHeader method="GET" url="/users/@me/billing/payment-sources/{payment_source.id}" mfa>
  Get Payment Source
</RouteHeader>

Returns a [payment source](#payment-source-object) object for a given payment source ID.

<RouteHeader method="POST" url="/users/@me/billing/payment-sources">
  Create Payment Source
</RouteHeader>

Creates a payment source. Returns a [payment source](#payment-source-object) object on success. Fires [User Payment Sources Update](/topics/gateway-events#user-payment-sources-update) Gateway event.

###### JSON Params

| Field                  | Type                                              | Description                                                                            |
| ---------------------- | ------------------------------------------------- | -------------------------------------------------------------------------------------- |
| token                  | string                                            | The token of payment source                                                            |
| payment_gateway        | integer                                           | The [payment gateway](#payment-gateway) of the payment source                          |
| billing_address        | [billing address](#billing-address-object) object | The billing address of the payment source                                              |
| billing_address_token? | string                                            | The token obtained from [Validate Billing Address](#validate-billing-address) endpoint |
| return_url?            | string                                            | The URL to return to after the payment source is created                               |
| bank?                  | string                                            | The bank information for the payment source                                            |

<RouteHeader method="POST" url="/users/@me/billing/payment-sources">
  Modify Payment Source
</RouteHeader>

Modifies a payment source. Returns an updated [payment source](#payment-source-object) object on success. Fires [User Payment Sources Update](/topics/gateway-events#user-payment-sources-update) Gateway event.

###### JSON Params

| Field            | Type                                              | Description                                              |
| ---------------- | ------------------------------------------------- | -------------------------------------------------------- |
| billing_address? | [billing address](#billing-address-object) object | The billing address of the payment source                |
| default?         | boolean                                           | Whether the payment source is the default payment source |
| expires_month?   | integer                                           | The year the credit card should expire in                |
| expires_year?    | integer                                           | The month the credit card should expire in               |

<RouteHeader method="DELETE" url="/users/@me/billing/payment-sources/{payment_source.id}">
  Delete Payment Source
</RouteHeader>

Deletes a payment source. Returns a 204 empty response on success. Fires [User Payment Sources Update](/topics/gateway-events#user-payment-sources-update) Gateway event.

<RouteHeader method="POST" url="/users/@me/billing/payment-sources/validate-billing-address">
  Validate Billing Address
</RouteHeader>

Validates a billing address.

| Field           | Type                                              | Description                     |
| --------------- | ------------------------------------------------- | ------------------------------- |
| billing_address | [billing address](#billing-address-object) object | The billing address to validate |

###### Response Body

| Field | Type   | Description                            |
| ----- | ------ | -------------------------------------- |
| token | string | The token of validated billing address |
