# Voice Resource

Voice resources are used to interact with voice in Discord. For more information on connecting to voice, see the [Voice Connections topic](/topics/voice-connections).

### Voice State Object

Used to represent a user's voice connection status.

###### Voice State Structure

| Field                      | Type                                                        | Description                                        |
| -------------------------- | ----------------------------------------------------------- | -------------------------------------------------- |
| guild_id? ^1^              | ?snowflake                                                  | The guild ID this voice state is for               |
| channel_id                 | ?snowflake                                                  | The channel ID this user is connected to           |
| user_id                    | snowflake                                                   | The user ID this voice state is for                |
| member? ^1^                | [guild member](/resources/guild#guild-member-object) object | The guild member this voice state is for           |
| session_id                 | string                                                      | The session ID this voice state is from            |
| deaf                       | boolean                                                     | Whether this user is deafened by the guild, if any |
| mute                       | boolean                                                     | Whether this user is muted by the guild, if any    |
| self_deaf                  | boolean                                                     | Whether this user is locally deafened              |
| self_mute                  | boolean                                                     | Whether this user is locally muted                 |
| self_stream?               | boolean                                                     | Whether this user is streaming using "Go Live"     |
| self_video                 | boolean                                                     | Whether this user's camera is enabled              |
| suppress                   | boolean                                                     | Whether this user's permission to speak is denied  |
| request_to_speak_timestamp | ?ISO8601 timestamp                                          | The time at which the user requested to speak      |

^1^ Omitted in the [Gateway guild](/topics/gateway-events#gateway-guild-object) object.

###### Example Voice State

```json
{
  "channel_id": "157733188964188161",
  "user_id": "80351110224678912",
  "session_id": "90326bd25d71d39b9ef95b299e3872ff",
  "deaf": false,
  "mute": false,
  "self_deaf": false,
  "self_mute": true,
  "suppress": false,
  "request_to_speak_timestamp": "2021-03-31T18:45:31.297561+00:00"
}
```

### Voice Region Object

<Alert type="warn">

A special voice region ID of `deprecated` is used as the default in the deprecated [guild `region`](/resources/guild#guild-object) field.

</Alert>

###### Voice Region Structure

| Field      | Type    | Description                                                          |
| ---------- | ------- | -------------------------------------------------------------------- |
| id         | string  | The unique ID for the region                                         |
| name       | string  | The name of the region                                               |
| optimal    | boolean | Whether this is the closest to the current user's client             |
| deprecated | boolean | Whether this is a deprecated voice region (avoid switching to these) |
| custom     | boolean | Whether this is a custom voice region (used for events, etc.)        |

## Endpoints

<RouteHeader method="GET" url="/voice/regions">
  Get Voice Regions
</RouteHeader>

Returns an array of [voice region](#voice-region-object) objects that can be used when setting a [voice channel's `rtc_region`](/resources/channel#channel-object).

<RouteHeader method="GET" url="/guilds/{guild.id}/regions">
  Get Guild Voice Regions
</RouteHeader>

Returns a list of [voice region](#voice-region-object) objects that can be used when setting a [voice channel's `rtc_region`](/resources/channel#channel-object). Unlike the similar [Get Voice Regions](#get-voice-regions) route, this returns VIP servers when the guild is VIP-enabled.

<RouteHeader method="PATCH" url="/guilds/{guild.id}/voice-states/@me">
  Modify Current User Voice State
</RouteHeader>

Updates the current user's voice state in the given guild ID. Returns a 204 empty response on success. Fires a [Voice State Update](/topics/gateway-events#voice-state-update) Gateway event.

###### JSON Params

| Field                       | Type               | Description                                    |
| --------------------------- | ------------------ | ---------------------------------------------- |
| channel_id?                 | snowflake          | The ID of the channel the user is currently in |
| suppress?                   | boolean            | Whether the user is suppressed in the channel  |
| request_to_speak_timestamp? | ?ISO8601 timestamp | The time at which the user requested to speak  |

###### Caveats

There are currently several caveats for this endpoint:

- `channel_id` must point to a stage channel
- Current user must already have joined `channel_id`
- You must have the `MUTE_MEMBERS` permission to unsuppress yourself; you can always suppress yourself
- You must have the `REQUEST_TO_SPEAK` permission to request to speak; you can always clear your own request to speak
- You can only set `request_to_speak_timestamp` to the present or a future time

<RouteHeader method="PATCH" url="/guilds/{guild.id}/voice-states/{user.id}">
  Modify User Voice State
</RouteHeader>

Updates another user's voice state in the given guild ID. Returns a 204 empty response on success. Fires a [Voice State Update](/topics/gateway-events#voice-state-update) Gateway event.

###### JSON Params

| Field      | Type      | Description                                    |
| ---------- | --------- | ---------------------------------------------- |
| channel_id | snowflake | The ID of the channel the user is currently in |
| suppress?  | boolean   | Whether the user is suppressed in the channel  |

###### Caveats

There are currently several caveats for this endpoint:

- `channel_id` must point to a stage channel
- Target user must already have joined `channel_id`
- You must have the `MUTE_MEMBERS` permission
- When unsuppressed, user accounts will have their `request_to_speak_timestamp` set to the current time; bot users will not
- When suppressed, the user will have their `request_to_speak_timestamp` removed

<RouteHeader method="POST" url="/channels/{channel.id}/voice-channel-effects">
  Send Voice Channel Effect
</RouteHeader>

Sends a voice channel effect to a voice channel. Returns a 204 empty response on success. Fires a [Voice Channel Effect Send](/topics/gateway-events#voice-channel-effect-send) Gateway event.

<Alert type="info">

Sending a voice channel effect requires the current user to be connected to the voice channel. The user cannot be server muted, deafened, or suppressed.

</Alert>

###### JSON Params

| Field           | Type       | Description                                                                                          |
| --------------- | ---------- | ---------------------------------------------------------------------------------------------------- |
| animation_type? | ?integer   | The [type of emoji animation](#voice-channel-effect-animation-type), if applicable (default `BASIC`) |
| animation_id?   | ?integer   | The ID of the emoji animation (0-20, default 0)                                                      |
| emoji_id?       | ?snowflake | The ID of the custom emoji to send                                                                   |
| emoji_name?     | ?string    | The emoji name or unicode character of the emoji to send                                             |

###### Voice Channel Effect Animation Type

| Value | Name    | Description                                              |
| ----- | ------- | -------------------------------------------------------- |
| 0     | PREMIUM | A fun animation, requires a premium (Nitro) subscription |
| 1     | BASIC   | The standard animation                                   |

<RouteHeader method="GET" url="/streams/{stream_key}/preview">
  Get Stream Preview
</RouteHeader>

Returns a URL to a stream preview for the given [stream key](/topics/gateway-events#stream-key).

###### Response Structure

| Field | Type   | Description                       |
| ----- | ------ | --------------------------------- |
| url   | string | The CDN URL to the stream preview |

<RouteHeader method="POST" url="/streams/{stream_key}/preview">
  Upload Stream Preview
</RouteHeader>

Uploads a stream preview for the given [stream key](/topics/gateway-events#stream-key). User must be the owner of the stream. Returns a 204 empty response on success.

###### JSON Params

| Field     | Type                              | Description              |
| --------- | --------------------------------- | ------------------------ |
| thumbnail | [image data](/reference#cdn-data) | The stream preview image |

<RouteHeader method="POST" url="/streams/{stream_key}/notify">
  Broadcast Stream Notification
</RouteHeader>

Broadcasts a stream notification to all friends of the current user that are in the same guild as the stream and have stream notifications enabled. Guild must have more than 1 and no more than 50 members. User must be the owner of the stream and must be streaming in a guild. Returns a 204 empty response on success.
